{"version":3,"file":"login-otp.DLeWXDve.js","sources":["../../resources/scripts/login-otp.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', function () {\r\n    const loginform = document.querySelector('#loginform');\r\n    if (loginform) {\r\n        loginform.classList.add('otp-loginform');\r\n\r\n        const el = document.querySelector(\"input[name='pwd']\");\r\n        if (el) {\r\n            el.setAttribute(\"autocomplete\", \"off\");\r\n            el.setAttribute(\"readonly\", true);\r\n            setTimeout(() => el.removeAttribute(\"readonly\"), 500);\r\n        }\r\n\r\n        const rememberBox = document.querySelector(\"#rememberme\");\r\n        if (rememberBox) {\r\n            rememberBox.checked = false;\r\n            rememberBox.closest(\"p\")?.remove();\r\n        }\r\n    }\r\n\r\n    // Enforce numeric-only input for numeric inputmode elements.\r\n    const inputEl = document.querySelector('input.authcode[inputmode=\"numeric\"]');\r\n    const expectedLength = Number(inputEl?.dataset.digits) || 0;\r\n\r\n    if (inputEl) {\r\n        inputEl?.addEventListener('input', function () {\r\n                let value = this.value.replace(/[^0-9 ]/g, '').trimStart();\r\n                this.value = value;\r\n\r\n                // Auto-submit if it's the expected length.\r\n                if (expectedLength && value.replace(/ /g, '').length === expectedLength && !loginform.submit.disabled) {\r\n                    if (undefined !== loginform.requestSubmit) {\r\n                        loginform.requestSubmit();\r\n                        loginform.submit.disabled = true;\r\n                    }\r\n                }\r\n            }\r\n        );\r\n    }\r\n\r\n    // Countdown\r\n    const timer = document.querySelector('#countdown');\r\n    if (!timer) return;\r\n\r\n    let remaining = Number(timer.dataset.time) || 0;\r\n    const render = () => {\r\n        const mm = String(Math.floor(remaining / 60)).padStart(2, '0');\r\n        const ss = String(remaining % 60).padStart(2, '0');\r\n        timer.textContent = `${mm}:${ss}`;\r\n    };\r\n\r\n    const start = () => {\r\n        if (remaining <= 0) {\r\n            render();\r\n            loginform.submit.disabled = true;\r\n            return;\r\n        }\r\n        render();\r\n\r\n        const id = setInterval(() => {\r\n            remaining--;\r\n            render();\r\n            if (remaining <= 0) {\r\n                clearInterval(id);\r\n                loginform.submit.disabled = true;\r\n            }\r\n        }, 1000);\r\n    };\r\n\r\n    start();\r\n});\r\n"],"names":[],"mappings":"AAAA,SAAS,iBAAiB,oBAAoB,WAAY;AACtD,QAAM,YAAY,SAAS,cAAc,YAAY;AACrD,MAAI,WAAW;AACX,cAAU,UAAU,IAAI,eAAe;AAEvC,UAAM,KAAK,SAAS,cAAc,mBAAmB;AACrD,QAAI,IAAI;AACJ,SAAG,aAAa,gBAAgB,KAAK;AACrC,SAAG,aAAa,YAAY,IAAI;AAChC,iBAAW,MAAM,GAAG,gBAAgB,UAAU,GAAG,GAAG;AAAA,IACxD;AAEA,UAAM,cAAc,SAAS,cAAc,aAAa;AACxD,QAAI,aAAa;AACb,kBAAY,UAAU;AACtB,kBAAY,QAAQ,GAAG,GAAG,OAAM;AAAA,IACpC;AAAA,EACJ;AAGA,QAAM,UAAU,SAAS,cAAc,qCAAqC;AAC5E,QAAM,iBAAiB,OAAO,SAAS,QAAQ,MAAM,KAAK;AAE1D,MAAI,SAAS;AACT,aAAS;AAAA,MAAiB;AAAA,MAAS,WAAY;AACvC,YAAI,QAAQ,KAAK,MAAM,QAAQ,YAAY,EAAE,EAAE;AAC/C,aAAK,QAAQ;AAGb,YAAI,kBAAkB,MAAM,QAAQ,MAAM,EAAE,EAAE,WAAW,kBAAkB,CAAC,UAAU,OAAO,UAAU;AACnG,cAAI,WAAc,UAAU,eAAe;AACvC,sBAAU,cAAa;AACvB,sBAAU,OAAO,WAAW;AAAA,UAChC;AAAA,QACJ;AAAA,MACJ;AAAA,IACZ;AAAA,EACI;AAGA,QAAM,QAAQ,SAAS,cAAc,YAAY;AACjD,MAAI,CAAC,MAAO;AAEZ,MAAI,YAAY,OAAO,MAAM,QAAQ,IAAI,KAAK;AAC9C,QAAM,SAAS,MAAM;AACjB,UAAM,KAAK,OAAO,KAAK,MAAM,YAAY,EAAE,CAAC,EAAE,SAAS,GAAG,GAAG;AAC7D,UAAM,KAAK,OAAO,YAAY,EAAE,EAAE,SAAS,GAAG,GAAG;AACjD,UAAM,cAAc,GAAG,EAAE,IAAI,EAAE;AAAA,EACnC;AAEA,QAAM,QAAQ,MAAM;AAChB,QAAI,aAAa,GAAG;AAChB;AACA,gBAAU,OAAO,WAAW;AAC5B;AAAA,IACJ;AACA;AAEA,UAAM,KAAK,YAAY,MAAM;AACzB;AACA;AACA,UAAI,aAAa,GAAG;AAChB,sBAAc,EAAE;AAChB,kBAAU,OAAO,WAAW;AAAA,MAChC;AAAA,IACJ,GAAG,GAAI;AAAA,EACX;AAEA;AACJ,CAAC;"}