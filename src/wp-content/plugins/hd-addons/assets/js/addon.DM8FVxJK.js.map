{"version":3,"file":"addon.DM8FVxJK.js","sources":["../../resources/scripts/addon.js"],"sourcesContent":["import $ from 'jquery';\r\nimport select2 from 'select2';\r\n\r\nimport 'select2/dist/css/select2.min.css';\r\n//import '../styles/3rd/_index.scss';\r\n\r\nselect2();\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    //---------------------------------------------------------------\r\n    // codemirror\r\n    //---------------------------------------------------------------\r\n\r\n    if (typeof codemirror_settings !== 'undefined') {\r\n        const codemirror_css = document.querySelectorAll('.codemirror_css');\r\n        const codemirror_html = document.querySelectorAll('.codemirror_html');\r\n\r\n        function initializeCodeMirror(elements, settings, type) {\r\n            elements.forEach(el => {\r\n                if (!el.CodeMirror) {\r\n                    let editorSettings = settings ? {...settings} : {};\r\n                    editorSettings.codemirror = {\r\n                        ...editorSettings.codemirror,\r\n                        indentUnit: 3,\r\n                        tabSize: 3,\r\n                        autoRefresh: true,\r\n                    };\r\n                    el.CodeMirror = wp.codeEditor.initialize(el, editorSettings);\r\n                }\r\n            });\r\n        }\r\n\r\n        initializeCodeMirror(codemirror_css, codemirror_settings.codemirror_css, 'CSS');\r\n        initializeCodeMirror(codemirror_html, codemirror_settings.codemirror_html, 'HTML');\r\n    }\r\n\r\n    //---------------------------------------------------------------\r\n    // select2\r\n    //---------------------------------------------------------------\r\n\r\n    // select2 multiple\r\n    const select2_multiple = $('.select2-multiple');\r\n    $.each(select2_multiple, function (i, el) {\r\n        $(el).select2({\r\n            multiple: true,\r\n            allowClear: true,\r\n            width: 'resolve',\r\n            dropdownAutoWidth: true,\r\n            placeholder: $(el).attr('placeholder'),\r\n        });\r\n    });\r\n\r\n    // select2 tags\r\n    const select2_tags = $('.select2-tags');\r\n    $.each(select2_tags, function (i, el) {\r\n        $(el).select2({\r\n            multiple: true,\r\n            tags: true,\r\n            allowClear: true,\r\n            width: 'resolve',\r\n            dropdownAutoWidth: true,\r\n            placeholder: $(el).attr('placeholder'),\r\n        });\r\n    });\r\n\r\n    // select2 IPs\r\n    const select2_ips = $('.select2-ips');\r\n    $.each(select2_ips, function (i, el) {\r\n        $(el).select2({\r\n            multiple: true,\r\n            tags: true,\r\n            allowClear: true,\r\n            width: 'resolve',\r\n            dropdownAutoWidth: true,\r\n            placeholder: $(el).attr('placeholder'),\r\n            createTag: function (params) {\r\n                let term = $.trim(params.term);\r\n\r\n                // Validate the term as an IP address or range\r\n                if (isValidIPRange(term)) {\r\n                    return {\r\n                        id: term,\r\n                        text: term,\r\n                    };\r\n                } else {\r\n                    return null;\r\n                }\r\n            },\r\n        });\r\n    });\r\n\r\n    // select2 emails\r\n    const select2_emails = $('.select2-emails');\r\n    $.each(select2_emails, function (i, el) {\r\n        $(el).select2({\r\n            multiple: true,\r\n            tags: true,\r\n            allowClear: true,\r\n            width: 'resolve',\r\n            dropdownAutoWidth: true,\r\n            placeholder: $(el).attr('placeholder'),\r\n            createTag: function (params) {\r\n                let term = $.trim(params.term);\r\n                if (isValidEmail(term)) {\r\n                    return {\r\n                        id: term,\r\n                        text: term,\r\n                    };\r\n                } else {\r\n                    return null;\r\n                }\r\n            },\r\n        });\r\n    });\r\n});\r\n\r\njQuery(function ($) {\r\n    $('.addon-color-field').wpColorPicker();\r\n\r\n    //---------------------------------------------------------------\r\n    // Other\r\n    //---------------------------------------------------------------\r\n\r\n    $.fn.fadeOutAndRemove = function (speed) {\r\n        return this.fadeOut(speed, function () {\r\n            $(this).remove();\r\n        });\r\n    };\r\n\r\n    $.fn.serializeObject = function () {\r\n        let obj = {};\r\n        let array = this.serializeArray();\r\n        $.each(array, function () {\r\n            let name = this.name;\r\n            let value = this.value || '';\r\n            if (name.indexOf('[]') > -1) {\r\n                name = name.replace('[]', '');\r\n                if (!obj[name]) {\r\n                    obj[name] = [];\r\n                }\r\n                obj[name].push(value);\r\n            } else {\r\n                if (obj[name] !== undefined) {\r\n                    if (!Array.isArray(obj[name])) {\r\n                        obj[name] = [obj[name]];\r\n                    }\r\n                    obj[name].push(value);\r\n                } else {\r\n                    obj[name] = value;\r\n                }\r\n            }\r\n        });\r\n\r\n        return obj;\r\n    };\r\n\r\n    //---------------------------------------------------------------\r\n    // ajax submit settings\r\n    //---------------------------------------------------------------\r\n\r\n    $(document).on('submit', '#_settings_form', function (e) {\r\n        e.preventDefault();\r\n        let $this = $(this);\r\n        let $data = $this.serializeObject();\r\n\r\n        let btn_submit = $this.find('button[name=\"_submit_settings\"]');\r\n        let button_text = btn_submit.html();\r\n        let button_text_loading = '<span class=\"ajax-loader\">&nbsp;</span>';\r\n\r\n        btn_submit.prop('disabled', true).html(button_text_loading);\r\n        $.ajax({\r\n            type: 'POST',\r\n            url: ajaxurl,\r\n            data: {\r\n                action: 'submit_settings',\r\n                _data: $data,\r\n                _ajax_nonce: $this.find('input[name=\"_wpnonce\"]').val(),\r\n                _wp_http_referer: $this.find('input[name=\"_wp_http_referer\"]').val(),\r\n            },\r\n        })\r\n            .done(function (data) {\r\n                $this.find('#_content').prepend(data);\r\n\r\n                // auto reload tabs\r\n                if (!window.location.hash ||\r\n                    window.location.hash === '#global_setting_settings' ||\r\n                    window.location.hash === '#custom_css_settings' ||\r\n                    window.location.hash === '#custom_script_settings' ||\r\n                    (window.location.hash === '#custom_sorting_settings' && $data['order_reset'] !== undefined) ||\r\n                    (window.location.hash === '#base_slug_settings' && $data['base_slug_reset'] !== undefined)\r\n                ) {\r\n                    window.location.reload();\r\n                }\r\n\r\n                // dismissible auto-hide\r\n                setTimeout(() => {\r\n                    $this.find('#_content')?.find('.dismissible-auto')?.fadeOutAndRemove(400);\r\n                }, 4000);\r\n            })\r\n            .always(function () {\r\n                btn_submit.prop('disabled', false).html(button_text);\r\n            });\r\n    });\r\n\r\n    //---------------------------------------------------------------\r\n    // filter tabs\r\n    //---------------------------------------------------------------\r\n\r\n    const $filterTabs = $('.filter-tabs');\r\n    $filterTabs.each(function () {\r\n        const $el = $(this),\r\n            $nav = $el.find('.tabs-nav'),\r\n            $content = $el.find('.tabs-content'),\r\n            $tabs = $nav.find('a'),\r\n            initialHash = window.location.hash;\r\n\r\n        const activateTab = (hash) => {\r\n            const $tab = $nav.find(`a[href=\"${hash}\"]`);\r\n            $nav.find('a').removeClass('current');\r\n            $content.find('.tabs-panel').hide();\r\n\r\n            if ($tab.length) {\r\n                $tab.addClass('current');\r\n                $(hash).show();\r\n            } else {\r\n                $tabs.first().addClass('current');\r\n                $content.find('.tabs-panel').first().show();\r\n                window.history.replaceState(null, null, window.location.pathname + window.location.search);\r\n            }\r\n        };\r\n\r\n        activateTab(initialHash || $tabs.first().attr('href'));\r\n\r\n        $nav.on('click', 'a', function (e) {\r\n            e.preventDefault();\r\n            const hash = $(this).attr('href');\r\n            window.location.hash = hash;\r\n            activateTab(hash);\r\n            $('html, body').animate({scrollTop: $el.offset().top - $('header').outerHeight()}, 300);\r\n        });\r\n\r\n        $(window).on('hashchange', function () {\r\n            activateTab(window.location.hash || $tabs.first().attr('href'));\r\n        });\r\n    });\r\n});\r\n\r\n/**\r\n * Validate email address\r\n *\r\n * @param {string} email\r\n * @returns {boolean}\r\n */\r\nfunction isValidEmail(email) {\r\n    const emailPattern = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    return emailPattern.test(email);\r\n}\r\n\r\n/**\r\n * validate IP range (IPv4)\r\n *\r\n * @param range\r\n * @returns {boolean}\r\n */\r\nfunction isValidIPRange(range) {\r\n    const ipPattern = /^(25[0-5]|2[0-4]\\d|1\\d{2}|\\d{1,2})\\.(25[0-5]|2[0-4]\\d|1\\d{2}|\\d{1,2})\\.(25[0-5]|2[0-4]\\d|1\\d{2}|\\d{1,2})\\.(25[0-5]|2[0-4]\\d|1\\d{2}|\\d{1,2})$/;\r\n    const rangePattern = /^(25[0-5]|2[0-4]\\d|1\\d{2}|\\d{1,2})\\.(25[0-5]|2[0-4]\\d|1\\d{2}|\\d{1,2})\\.(25[0-5]|2[0-4]\\d|1\\d{2}|\\d{1,2})\\.(25[0-5]|2[0-4]\\d|1\\d{2}|\\d{1,2})-(\\d|[1-9]\\d|1\\d{2}|2[0-4]\\d|25[0-5])$/;\r\n    const cidrPattern = /^(25[0-5]|2[0-4]\\d|1\\d{2}|\\d{1,2})\\.(25[0-5]|2[0-4]\\d|1\\d{2}|\\d{1,2})\\.(25[0-5]|2[0-4]\\d|1\\d{2}|\\d{1,2})\\.(25[0-5]|2[0-4]\\d|1\\d{2}|\\d{1,2})\\/(\\d|[1-2]\\d|3[0-2])$/;\r\n\r\n    if (ipPattern.test(range)) {\r\n        return true;\r\n    }\r\n\r\n    if (rangePattern.test(range)) {\r\n        const [startIP, endRange] = range.split('-');\r\n        const endIP = startIP.split('.').slice(0, 3).join('.') + '.' + endRange;\r\n        return compareIPs(startIP, endIP) < 0;\r\n    }\r\n\r\n    return cidrPattern.test(range);\r\n}\r\n\r\n/**\r\n * compare two IP addresses\r\n *\r\n * @param ip1\r\n * @param ip2\r\n * @returns {number}\r\n */\r\nfunction compareIPs(ip1, ip2) {\r\n    const ip1Parts = ip1.split('.').map(Number);\r\n    const ip2Parts = ip2.split('.').map(Number);\r\n\r\n    for (let i = 0; i < 4; i++) {\r\n        if (ip1Parts[i] < ip2Parts[i]) return -1;\r\n        if (ip1Parts[i] > ip2Parts[i]) return 1;\r\n    }\r\n\r\n    return 0;\r\n}\r\n"],"names":["$"],"mappings":";AAMA;AAEA,SAAS,iBAAiB,oBAAoB,MAAM;AAKhD,MAAI,OAAO,wBAAwB,aAAa;AAI5C,QAAS,uBAAT,SAA8B,UAAU,UAAU,MAAM;AACpD,eAAS,QAAQ,QAAM;AACnB,YAAI,CAAC,GAAG,YAAY;AAChB,cAAI,iBAAiB,WAAW,EAAC,GAAG,SAAQ,IAAI,CAAA;AAChD,yBAAe,aAAa;AAAA,YACxB,GAAG,eAAe;AAAA,YAClB,YAAY;AAAA,YACZ,SAAS;AAAA,YACT,aAAa;AAAA,UACrC;AACoB,aAAG,aAAa,GAAG,WAAW,WAAW,IAAI,cAAc;AAAA,QAC/D;AAAA,MACJ,CAAC;AAAA,IACL;AAhBA,UAAM,iBAAiB,SAAS,iBAAiB,iBAAiB;AAClE,UAAM,kBAAkB,SAAS,iBAAiB,kBAAkB;AAiBpE,yBAAqB,gBAAgB,oBAAoB,cAAqB;AAC9E,yBAAqB,iBAAiB,oBAAoB,eAAuB;AAAA,EACrF;AAOA,QAAM,mBAAmB,EAAE,mBAAmB;AAC9C,IAAE,KAAK,kBAAkB,SAAU,GAAG,IAAI;AACtC,MAAE,EAAE,EAAE,QAAQ;AAAA,MACV,UAAU;AAAA,MACV,YAAY;AAAA,MACZ,OAAO;AAAA,MACP,mBAAmB;AAAA,MACnB,aAAa,EAAE,EAAE,EAAE,KAAK,aAAa;AAAA,IACjD,CAAS;AAAA,EACL,CAAC;AAGD,QAAM,eAAe,EAAE,eAAe;AACtC,IAAE,KAAK,cAAc,SAAU,GAAG,IAAI;AAClC,MAAE,EAAE,EAAE,QAAQ;AAAA,MACV,UAAU;AAAA,MACV,MAAM;AAAA,MACN,YAAY;AAAA,MACZ,OAAO;AAAA,MACP,mBAAmB;AAAA,MACnB,aAAa,EAAE,EAAE,EAAE,KAAK,aAAa;AAAA,IACjD,CAAS;AAAA,EACL,CAAC;AAGD,QAAM,cAAc,EAAE,cAAc;AACpC,IAAE,KAAK,aAAa,SAAU,GAAG,IAAI;AACjC,MAAE,EAAE,EAAE,QAAQ;AAAA,MACV,UAAU;AAAA,MACV,MAAM;AAAA,MACN,YAAY;AAAA,MACZ,OAAO;AAAA,MACP,mBAAmB;AAAA,MACnB,aAAa,EAAE,EAAE,EAAE,KAAK,aAAa;AAAA,MACrC,WAAW,SAAU,QAAQ;AACzB,YAAI,OAAO,EAAE,KAAK,OAAO,IAAI;AAG7B,YAAI,eAAe,IAAI,GAAG;AACtB,iBAAO;AAAA,YACH,IAAI;AAAA,YACJ,MAAM;AAAA,UAC9B;AAAA,QACgB,OAAO;AACH,iBAAO;AAAA,QACX;AAAA,MACJ;AAAA,IACZ,CAAS;AAAA,EACL,CAAC;AAGD,QAAM,iBAAiB,EAAE,iBAAiB;AAC1C,IAAE,KAAK,gBAAgB,SAAU,GAAG,IAAI;AACpC,MAAE,EAAE,EAAE,QAAQ;AAAA,MACV,UAAU;AAAA,MACV,MAAM;AAAA,MACN,YAAY;AAAA,MACZ,OAAO;AAAA,MACP,mBAAmB;AAAA,MACnB,aAAa,EAAE,EAAE,EAAE,KAAK,aAAa;AAAA,MACrC,WAAW,SAAU,QAAQ;AACzB,YAAI,OAAO,EAAE,KAAK,OAAO,IAAI;AAC7B,YAAI,aAAa,IAAI,GAAG;AACpB,iBAAO;AAAA,YACH,IAAI;AAAA,YACJ,MAAM;AAAA,UAC9B;AAAA,QACgB,OAAO;AACH,iBAAO;AAAA,QACX;AAAA,MACJ;AAAA,IACZ,CAAS;AAAA,EACL,CAAC;AACL,CAAC;AAED,OAAO,SAAUA,IAAG;AAChB,EAAAA,GAAE,oBAAoB,EAAE;AAMxB,EAAAA,GAAE,GAAG,mBAAmB,SAAU,OAAO;AACrC,WAAO,KAAK,QAAQ,OAAO,WAAY;AACnC,MAAAA,GAAE,IAAI,EAAE;IACZ,CAAC;AAAA,EACL;AAEA,EAAAA,GAAE,GAAG,kBAAkB,WAAY;AAC/B,QAAI,MAAM,CAAA;AACV,QAAI,QAAQ,KAAK;AACjB,IAAAA,GAAE,KAAK,OAAO,WAAY;AACtB,UAAI,OAAO,KAAK;AAChB,UAAI,QAAQ,KAAK,SAAS;AAC1B,UAAI,KAAK,QAAQ,IAAI,IAAI,IAAI;AACzB,eAAO,KAAK,QAAQ,MAAM,EAAE;AAC5B,YAAI,CAAC,IAAI,IAAI,GAAG;AACZ,cAAI,IAAI,IAAI;QAChB;AACA,YAAI,IAAI,EAAE,KAAK,KAAK;AAAA,MACxB,OAAO;AACH,YAAI,IAAI,IAAI,MAAM,QAAW;AACzB,cAAI,CAAC,MAAM,QAAQ,IAAI,IAAI,CAAC,GAAG;AAC3B,gBAAI,IAAI,IAAI,CAAC,IAAI,IAAI,CAAC;AAAA,UAC1B;AACA,cAAI,IAAI,EAAE,KAAK,KAAK;AAAA,QACxB,OAAO;AACH,cAAI,IAAI,IAAI;AAAA,QAChB;AAAA,MACJ;AAAA,IACJ,CAAC;AAED,WAAO;AAAA,EACX;AAMA,EAAAA,GAAE,QAAQ,EAAE,GAAG,UAAU,mBAAmB,SAAU,GAAG;AACrD,MAAE,eAAc;AAChB,QAAI,QAAQA,GAAE,IAAI;AAClB,QAAI,QAAQ,MAAM;AAElB,QAAI,aAAa,MAAM,KAAK,iCAAiC;AAC7D,QAAI,cAAc,WAAW;AAC7B,QAAI,sBAAsB;AAE1B,eAAW,KAAK,YAAY,IAAI,EAAE,KAAK,mBAAmB;AAC1D,IAAAA,GAAE,KAAK;AAAA,MACH,MAAM;AAAA,MACN,KAAK;AAAA,MACL,MAAM;AAAA,QACF,QAAQ;AAAA,QACR,OAAO;AAAA,QACP,aAAa,MAAM,KAAK,wBAAwB,EAAE,IAAG;AAAA,QACrD,kBAAkB,MAAM,KAAK,gCAAgC,EAAE,IAAG;AAAA,MAClF;AAAA,IACA,CAAS,EACI,KAAK,SAAU,MAAM;AAClB,YAAM,KAAK,WAAW,EAAE,QAAQ,IAAI;AAGpC,UAAI,CAAC,OAAO,SAAS,QACjB,OAAO,SAAS,SAAS,8BACzB,OAAO,SAAS,SAAS,0BACzB,OAAO,SAAS,SAAS,6BACxB,OAAO,SAAS,SAAS,8BAA8B,MAAM,aAAa,MAAM,UAChF,OAAO,SAAS,SAAS,yBAAyB,MAAM,iBAAiB,MAAM,QAClF;AACE,eAAO,SAAS;MACpB;AAGA,iBAAW,MAAM;AACb,cAAM,KAAK,WAAW,GAAG,KAAK,mBAAmB,GAAG,iBAAiB,GAAG;AAAA,MAC5E,GAAG,GAAI;AAAA,IACX,CAAC,EACA,OAAO,WAAY;AAChB,iBAAW,KAAK,YAAY,KAAK,EAAE,KAAK,WAAW;AAAA,IACvD,CAAC;AAAA,EACT,CAAC;AAMD,QAAM,cAAcA,GAAE,cAAc;AACpC,cAAY,KAAK,WAAY;AACzB,UAAM,MAAMA,GAAE,IAAI,GACd,OAAO,IAAI,KAAK,WAAW,GAC3B,WAAW,IAAI,KAAK,eAAe,GACnC,QAAQ,KAAK,KAAK,GAAG,GACrB,cAAc,OAAO,SAAS;AAElC,UAAM,cAAc,CAAC,SAAS;AAC1B,YAAM,OAAO,KAAK,KAAK,WAAW,IAAI,IAAI;AAC1C,WAAK,KAAK,GAAG,EAAE,YAAY,SAAS;AACpC,eAAS,KAAK,aAAa,EAAE,KAAI;AAEjC,UAAI,KAAK,QAAQ;AACb,aAAK,SAAS,SAAS;AACvB,QAAAA,GAAE,IAAI,EAAE;MACZ,OAAO;AACH,cAAM,MAAK,EAAG,SAAS,SAAS;AAChC,iBAAS,KAAK,aAAa,EAAE,MAAK,EAAG,KAAI;AACzC,eAAO,QAAQ,aAAa,MAAM,MAAM,OAAO,SAAS,WAAW,OAAO,SAAS,MAAM;AAAA,MAC7F;AAAA,IACJ;AAEA,gBAAY,eAAe,MAAM,MAAK,EAAG,KAAK,MAAM,CAAC;AAErD,SAAK,GAAG,SAAS,KAAK,SAAU,GAAG;AAC/B,QAAE,eAAc;AAChB,YAAM,OAAOA,GAAE,IAAI,EAAE,KAAK,MAAM;AAChC,aAAO,SAAS,OAAO;AACvB,kBAAY,IAAI;AAChB,MAAAA,GAAE,YAAY,EAAE,QAAQ,EAAC,WAAW,IAAI,OAAM,EAAG,MAAMA,GAAE,QAAQ,EAAE,YAAW,EAAE,GAAG,GAAG;AAAA,IAC1F,CAAC;AAED,IAAAA,GAAE,MAAM,EAAE,GAAG,cAAc,WAAY;AACnC,kBAAY,OAAO,SAAS,QAAQ,MAAM,QAAQ,KAAK,MAAM,CAAC;AAAA,IAClE,CAAC;AAAA,EACL,CAAC;AACL,CAAC;AAQD,SAAS,aAAa,OAAO;AACzB,QAAM,eAAe;AACrB,SAAO,aAAa,KAAK,KAAK;AAClC;AAQA,SAAS,eAAe,OAAO;AAC3B,QAAM,YAAY;AAClB,QAAM,eAAe;AACrB,QAAM,cAAc;AAEpB,MAAI,UAAU,KAAK,KAAK,GAAG;AACvB,WAAO;AAAA,EACX;AAEA,MAAI,aAAa,KAAK,KAAK,GAAG;AAC1B,UAAM,CAAC,SAAS,QAAQ,IAAI,MAAM,MAAM,GAAG;AAC3C,UAAM,QAAQ,QAAQ,MAAM,GAAG,EAAE,MAAM,GAAG,CAAC,EAAE,KAAK,GAAG,IAAI,MAAM;AAC/D,WAAO,WAAW,SAAS,KAAK,IAAI;AAAA,EACxC;AAEA,SAAO,YAAY,KAAK,KAAK;AACjC;AASA,SAAS,WAAW,KAAK,KAAK;AAC1B,QAAM,WAAW,IAAI,MAAM,GAAG,EAAE,IAAI,MAAM;AAC1C,QAAM,WAAW,IAAI,MAAM,GAAG,EAAE,IAAI,MAAM;AAE1C,WAAS,IAAI,GAAG,IAAI,GAAG,KAAK;AACxB,QAAI,SAAS,CAAC,IAAI,SAAS,CAAC,EAAG,QAAO;AACtC,QAAI,SAAS,CAAC,IAAI,SAAS,CAAC,EAAG,QAAO;AAAA,EAC1C;AAEA,SAAO;AACX;"}